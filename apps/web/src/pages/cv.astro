---
import BaseLayout from '../layouts/BaseLayout.astro';
import { personalInfo, summary, experience, education, skillCategories, formatDateRange } from '../data/cv-data';
---

<style>
  @media print {
    /* Reset for clean print layout */
    * {
      -webkit-print-color-adjust: exact !important;
      color-adjust: exact !important;
      print-color-adjust: exact !important;
    }

    /* Page layout */
    @page {
      size: A4;
      margin: 0.75in;
    }

    body {
      font-size: 11pt !important;
      line-height: 1.3 !important;
    }

    /* Hide navigation and non-essential elements */
    nav, .theme-toggle, header nav, .header-nav {
      display: none !important;
    }

    /* Container adjustments */
    .cv-container {
      max-width: none !important;
      margin: 0 !important;
      padding: 0 !important;
      background: white !important;
    }

    /* Header styling for print */
    .cv-header {
      background: white !important;
      border: none !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      padding: 0 0 1rem 0 !important;
      margin-bottom: 1.5rem !important;
      text-align: center !important;
      border-bottom: 2px solid #000 !important;
    }

    .cv-header h1 {
      font-size: 24pt !important;
      font-weight: bold !important;
      color: #000 !important;
      background: none !important;
      -webkit-background-clip: unset !important;
      background-clip: unset !important;
      margin-bottom: 0.5rem !important;
    }

    .cv-header .contact-info {
      display: block !important;
      text-align: center !important;
      margin-bottom: 0.5rem !important;
    }

    .cv-header .contact-links {
      display: flex !important;
      justify-content: center !important;
      flex-wrap: wrap !important;
      gap: 1rem !important;
      font-size: 10pt !important;
    }

    .cv-header .contact-links a,
    .cv-header .contact-links span {
      background: none !important;
      border: none !important;
      padding: 0 !important;
      color: #000 !important;
      text-decoration: none !important;
      box-shadow: none !important;
    }

    /* Remove all gradients, shadows, and decorative elements */
    .cv-section {
      background: white !important;
      border: none !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      padding: 0 !important;
      margin-bottom: 1.5rem !important;
      page-break-inside: avoid;
    }

    .cv-section h2 {
      font-size: 14pt !important;
      font-weight: bold !important;
      color: #000 !important;
      margin-bottom: 0.75rem !important;
      border-bottom: 1px solid #000 !important;
      padding-bottom: 0.25rem !important;
    }

    /* Section icons and decorative elements */
    .section-icon,
    .experience-number,
    .education-number,
    svg {
      display: none !important;
    }

    /* Experience styling */
    .experience-item {
      background: white !important;
      border: none !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      padding: 0 !important;
      margin-bottom: 1rem !important;
      margin-left: 0 !important;
      page-break-inside: avoid;
    }

    .experience-item h3 {
      font-size: 12pt !important;
      font-weight: bold !important;
      color: #000 !important;
      margin-bottom: 0.25rem !important;
    }

    .experience-item .role {
      font-size: 11pt !important;
      font-weight: normal !important;
      font-style: italic !important;
      color: #000 !important;
      margin-bottom: 0.25rem !important;
    }

    .experience-item .date-range {
      font-size: 10pt !important;
      color: #000 !important;
      background: none !important;
      border: none !important;
      padding: 0 !important;
      margin-bottom: 0.5rem !important;
    }

    .experience-item .location {
      font-size: 10pt !important;
      color: #000 !important;
      margin-bottom: 0.5rem !important;
    }

    .achievement-list {
      margin-left: 1rem !important;
      margin-bottom: 0.5rem !important;
    }

    .achievement-item {
      background: none !important;
      border: none !important;
      padding: 0 !important;
      margin-bottom: 0.25rem !important;
      list-style: disc !important;
      color: #000 !important;
    }

    .achievement-item::before {
      display: none !important;
    }

    /* Skills styling */
    .skills-grid {
      display: block !important;
      columns: 2 !important;
      column-gap: 2rem !important;
    }

    .skill-category {
      background: white !important;
      border: none !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      padding: 0 !important;
      margin-bottom: 1rem !important;
      break-inside: avoid;
    }

    .skill-category h3 {
      font-size: 11pt !important;
      font-weight: bold !important;
      color: #000 !important;
      margin-bottom: 0.5rem !important;
    }

    .skill-item {
      background: none !important;
      border: none !important;
      padding: 0 !important;
      margin-bottom: 0.1rem !important;
      display: flex !important;
      justify-content: space-between !important;
    }

    .skill-name {
      color: #000 !important;
      font-size: 10pt !important;
    }

    .skill-experience {
      color: #000 !important;
      background: none !important;
      padding: 0 !important;
      font-size: 10pt !important;
    }

    /* Education styling */
    .education-item {
      background: white !important;
      border: none !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      padding: 0 !important;
      margin-bottom: 1rem !important;
      margin-left: 0 !important;
    }

    .education-item h3 {
      font-size: 11pt !important;
      font-weight: bold !important;
      color: #000 !important;
      margin-bottom: 0.25rem !important;
    }

    .education-item .degree {
      font-size: 10pt !important;
      color: #000 !important;
      margin-bottom: 0.25rem !important;
    }

    .education-item .education-date {
      font-size: 10pt !important;
      color: #000 !important;
      background: none !important;
      padding: 0 !important;
    }

    /* Summary styling */
    .summary-text {
      color: #000 !important;
      font-size: 11pt !important;
      line-height: 1.4 !important;
      text-align: justify !important;
    }

    /* Hide timeline elements */
    .timeline-line {
      display: none !important;
    }

    /* Force page breaks */
    .page-break {
      page-break-before: always;
    }
  }
</style>

<BaseLayout title="CV">
  <div class="cv-container max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-8">
    <!-- Header -->
    <header class="cv-header">
      <h1 class="text-3xl font-bold text-gray-800 dark:text-monokai-text mb-2">{personalInfo.name}</h1>
      <p class="text-gray-600 dark:text-monokai-muted mb-3">{personalInfo.location}</p>
      <div class="contact-links flex flex-wrap justify-center gap-4 text-sm">
        <a href={personalInfo.linkedin} target="_blank" rel="noopener noreferrer" class="text-gray-600 dark:text-monokai-muted hover:text-gray-900 dark:hover:text-monokai-text transition-colors duration-200">
          LinkedIn
        </a>
        <span class="text-gray-400">•</span>
        <a href={personalInfo.github} target="_blank" rel="noopener noreferrer" class="text-gray-600 dark:text-monokai-muted hover:text-gray-900 dark:hover:text-monokai-text transition-colors duration-200">
          GitHub
        </a>
      </div>
    </header>

    <!-- Summary -->
    <section class="cv-section">
      <h2 class="text-xl font-semibold text-gray-800 dark:text-monokai-text mb-3">Summary</h2>
      <p class="text-gray-600 dark:text-gray-400">
        {summary}
      </p>
    </section>

    <!-- Experience -->
    <section class="cv-section">
      <h2 class="text-xl font-semibold text-gray-800 dark:text-monokai-text mb-4">Experience</h2>
      <div class="space-y-6">
        {experience.map((job) => (
          <div class="experience-item border-b border-gray-200 dark:border-monokai-border pb-6 last:border-b-0 last:pb-0">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3">
              <div>
                <h3 class="text-lg font-semibold text-gray-800 dark:text-monokai-text">{job.company}</h3>
                <p class="text-gray-600 dark:text-gray-400">{job.role}</p>
                <p class="text-sm text-gray-500 dark:text-monokai-muted">{job.location}</p>
              </div>
              <span class="text-sm text-gray-500 dark:text-monokai-muted mt-1 sm:mt-0">
                {formatDateRange(job.startDate, job.endDate)}
              </span>
            </div>
            <ul class="space-y-2">
              {job.achievements.map((achievement) => (
                <li class="text-gray-600 dark:text-gray-400 text-sm pl-4 relative">
                  <span class="absolute left-0">•</span>
                  {achievement}
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </section>

    <!-- Skills -->
    <section class="cv-section">
      <h2 class="text-xl font-semibold text-gray-800 dark:text-monokai-text mb-4">Technical Skills</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {Object.entries(skillCategories).map(([category, skills]) => (
          <div class="skill-category">
            <h3 class="text-sm font-semibold text-gray-700 dark:text-monokai-text mb-2">{category}</h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              {skills.join(', ')}
            </p>
          </div>
        ))}
      </div>
    </section>

    <!-- Education -->
    <section class="cv-section">
      <h2 class="text-xl font-semibold text-gray-800 dark:text-monokai-text mb-4">Education</h2>
      <div class="space-y-3">
        {education.map((edu) => (
          <div class="education-item">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start">
              <div>
                <h3 class="text-lg font-semibold text-gray-800 dark:text-monokai-text">{edu.institution}</h3>
                <p class="text-gray-600 dark:text-gray-400">{edu.degree}</p>
              </div>
              <span class="text-sm text-gray-500 dark:text-monokai-muted mt-1 sm:mt-0">
                {edu.startYear}–{edu.endYear}
              </span>
            </div>
          </div>
        ))}
      </div>
    </section>

  </div>
</BaseLayout>